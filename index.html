<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width-device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Strona startowa</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<audio src="audio/1b (1).mp3" id="dialog1"></audio>
<audio src="audio/2 (1).mp3" id="dialog2"></audio>
<audio src="audio/3b (1).mp3" id="dialog3"></audio>
<audio src="audio/4e.mp3" id="dialog4"></audio>
<audio src="audio/5.mp3" id="dialog5"></audio>
<audio src="audio/6b.mp3" id="dialog6"></audio>
<audio src="audio/7b.mp3" id="dialog7"></audio>
<audio src="audio/8.mp3" id="dialog8"></audio>
<audio src="audio/9b.mp3" id="dialog9"></audio>
<audio src="audio/10b.mp3" id="dialog10"></audio>
<audio src="audio/11.mp3" id="dialog11"></audio>
<audio src="audio/12b.mp3" id="dialog12"></audio>
<audio src="audio/13.mp3" id="dialog13"></audio>
<audio src="audio/14b.mp3" id="dialog14"></audio>
<audio src="audio/15.mp3" id="dialog15"></audio>

  <script src="js/three.js"></script>
  <script src="js/OrbitControls.js"></script>
  <script src="js/OBJLoader.js"></script>
  <script src="js/MTLLoader.js"></script>
  <script src="js/GLTFLoader.js"></script>
  <script src="js/FBXLoader.js"></script>
  <script src="https://unpkg.com/fflate"></script>
  <script src="js/TweenMax.min.js"></script>
  <script src="js/Reflector.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5/dat.gui.min.js"></script>

  <div id="tlopodprzycisk">
  <button id="przycisk" onclick="myFunction()">ROZPOCZNIJ PRZYGODĘ</button>
  <button id="przycisk2" onclick="myFunction2()">KOMPATYBILNOŚĆ</button>
  <button id="przyciskpowrot" onclick="myFunction3()">POWRÓT</button>

  <div id="tytul">
  <h1>ZASADA SZUFLADKOWA DIRICHLETA</h1>
  </div>
  </div>
  <div id="tlopodloader">
  <div id="loader"></div></div>

  <div id="napisdialog1">Pewnego razu żyła sobie dziewczynka o imieniu Eliza.<br>Pokłóciła się z rodzicami i dostała karę na wychodzenie z domu.</div>
<div id="napisdialog2">Nie wiedziała, co robić.<br>A przecież to jeszcze dziecko - potrzebowała jakiejś rozrywki.</div>
<div id="napisdialog3">„Lustereczko, powiedz przecie, kto jest...”</div>
<div id="napisdialog4">Na lustrze pojawiły się dziwne zniekształcenia.<br>Dziewczynka wyciąga rękę w stronę zwierciadła.</div>


<div id="kompatybilnosc">
<table>
<tbody>
<tr>
<td><img id="ie" src="img/IE.svg" alt="Logo Internet Explorer"></td>
<td>Strona może działać nieprawidłowo w przeglądarce Internet Explorer.</td>
</tr>
<tr>
<td><img id="telefon" src="img/Telefon.svg" alt="Logo telefonu"></td>
<td>Korzystanie ze strony na urządzeniach mobilnych jest możliwe, ale nie jest rekomendowane.</td>
</tr>
<tr>
<td><img id="karta" src="img/Karta.svg" alt="Logo telefonu"></td>
<td>Przełączanie kart podczas działania strony może zakłócić działanie animacji.</td>
</tr>
</tbody>
</table>
</div>  

<div id="tlopodpergamin">
<img id="pergamin" src="img/pergamin.jpg" alt="pierwszastrona">
<img id="pergamin2" src="img/pergamin2.jpg" alt="drugastrona">
<img id="pergamin3" src="img/pergamin3.jpg" alt="trzeciastrona">
<img id="pergamin4" src="img/pergamin4.jpg" alt="czwartastrona">
<img id="pergamin5" src="img/pergamin5.jpg" alt="piatastrona">
<img id="pergamin6" src="img/pergamin6.jpg" alt="szostastrona">
<img id="pergamin7" src="img/pergamin7.jpg" alt="siodmastrona">
<img id="pergamin8" src="img/pergamin8.jpg" alt="osmastrona">
<img id="pergamin9" src="img/pergamin9.jpg" alt="dziewiatastrona">
</div>

<button id="przycisk3" onclick="mySlideshow();">➔</button>
<button id="przycisk4" onclick="mySlideshow2();">➔</button>
<button id="przycisk5" onclick="mySlideshow3();">➔</button>
<button id="przycisk6" onclick="mySlideshow4();">➔</button>
<button id="przycisk7" onclick="mySlideshow5();">➔</button>
<button id="przycisk8" onclick="mySlideshow6();">➔</button>
<button id="przycisk9" onclick="mySlideshow7();">➔</button>
<button id="przycisk10" onclick="mySlideshow8();">➔</button>

<div id="tlopodszukajmonet">
<div id="szukajmonet">SZUKAJ MONET</div>
</div>


  <script>
  var myVar;


  function myFunction() {
    myVar = setTimeout(showPage, 3000);
    document.getElementById("tlopodprzycisk").style.display = "none";
    document.getElementById("loader").style.display = "block";
}

function myFunction2() {
    document.getElementById("kompatybilnosc").style.display = "block";
    document.getElementById("tytul").style.display = "none";
    document.getElementById("przycisk").style.display = "none";
    document.getElementById("przycisk2").style.display = "none";
    document.getElementById("przyciskpowrot").style.display = "block";
}

function myFunction3() {
    document.getElementById("kompatybilnosc").style.display = "none";
    document.getElementById("tytul").style.display = "block";
    document.getElementById("przycisk").style.display = "block";
    document.getElementById("przycisk2").style.display = "block";
    document.getElementById("przyciskpowrot").style.display = "none";
}

  function showPage() {
    document.getElementById("loader").style.display = "none";
    var scene = new THREE.Scene( );
    var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 )

    var renderer = new THREE.WebGLRenderer( {antialias:true, alpha:true} );
    renderer.setSize( window.innerWidth, window.innerHeight );
renderer.outputEncoding = THREE.sRGBEncoding;
renderer.physicallyCorrectLights = false;

    document.body.appendChild( renderer.domElement );
    
    window.addEventListener( 'resize', function( )
    {
    	var width = window.innerWidth;
        var height = window.innerHeight;
	renderer.setSize( width, height );
	camera.aspect = width / height;
	camera.updateProjectionMatrix( );
    } );


    controls = new THREE.OrbitControls( camera, renderer.domElement );
    controls.target = new THREE.Vector3(0, 0, 0);

    var mtlLoader = new THREE.MTLLoader();
    mtlLoader.load( '3dmodels/pokoj.mtl', function( materials ) {

    materials.preload();
    var objLoader = new THREE.OBJLoader();
    objLoader.setMaterials( materials );
    objLoader.load
    (
	'3dmodels/pokoj.obj',

	function( object )
	{
	    scene.add( object );
        })     
});

    // load fbx model and texture                                               
    const objs = [];
    const loader = new THREE.FBXLoader();
    loader.load("eliza/eliza18350905.fbx", model => {
        // model is a THREE.Group (THREE.Object3D)                              
        const mixer = new THREE.AnimationMixer(model);
        // animations is a list of THREE.AnimationClip                          
        mixer.clipAction(model.animations[0]).play();
        scene.add(model);
        model.scale.set(2, 2, 2);
        model.rotation.y = Math.PI/2;
        new TimelineMax().set(model.position, {x: 0, y: 0, z: 1});
        objs.push({model, mixer});
    });

    // animation rendering                                                      
    const clock = new THREE.Clock();
    (function animate() {
        // animation with THREE.AnimationMixer.update(timedelta)                
        objs.forEach(({mixer}) => {mixer.update(clock.getDelta());});
        renderer.render(scene, camera);
        requestAnimationFrame(animate);
    })();




// reflection

				var geometry = new THREE.PlaneGeometry( 1.8, 5.076 );
				verticalMirror = new THREE.Reflector( geometry, {
					clipBias: 0.003,
					textureWidth: window.innerWidth * window.devicePixelRatio,
					textureHeight: window.innerHeight * window.devicePixelRatio,
					color: 0x969696
				} );
				verticalMirror.position.x = -2.6;
				verticalMirror.position.y = 2.96;
				verticalMirror.position.z = 5.95;
                                verticalMirror.rotation.x = Math.PI;
				scene.add( verticalMirror );


var gui = new dat.GUI();
gui.add( camera.position , 'x', -500, 500 ).step(1);
gui.add( camera.position , 'y', -500, 500 ).step(1);
gui.add( camera.position , 'z', -500, 500 ).step(1);

gui.add( controls.target , 'x', -500, 500 ).step(1);
gui.add( controls.target , 'y', -500, 500 ).step(1);
gui.add( controls.target , 'z', -500, 500 ).step(1);

    // light
const light = new THREE.AmbientLight( 0xffffff, 1 );
scene.add( light );

camera.position.x = 3.163074873302347;
camera.position.y = 2.718629630445308;
camera.position.z = -4.554447132811671;

controls.target.x = 4;
controls.target.y = 0;
controls.target.z = 0;

// tween
const tl = new TimelineMax();
tl.to(camera.position, 7, {x: -4.964434946326108, y: 5.000690467689933, z: -0.4063625729616378});
tl.set(camera.position, {x: 3.4955177003341333, y: 4.173755499196321, z: 4.126892038540991});
tl.set(controls.target, {x: 7.905795506574759, y: 2.3402582077807943, z: 1.6945892504265487});
tl.to(camera.position, 2, {x: -1.0103271478174012, y: 4.017803729851018, z: 4.444992015256167}, "+=5");
tl.to(controls.target, 2, {x: -1.9552091820578785, y: 3.622482386048581, z: 3.367299161104931}, "-=2");
tl.set(camera.position, {x: -6.742605154520381, y: 2.630785248661386, z: -0.6016348408311921}, "+=1");
tl.set(controls.target, {x: -2.605315669291314, y: 2.3442915886133506, z: -0.5630714658802479});
tl.to(camera.position, 2, {x: -6.339219429710548, y: 2.602852116806703, z: -0.5978749117734752}, "+=1");
tl.to(controls.target, 1, {x: -2.605315669291314, y: 2.3442915886133506, z: -0.563071465880248});
tl.set(camera.position, {x: 5.439534059100949, y: 2.2833655384276312, z: -0.3536942125937286}, "+=1");
tl.set(controls.target, {x: 5.53389574115432, y: 1.8216159328326142, z: -1.7637956579081047});
tl.set(camera.position, {x: -2.2786487140264358, y: 2.7372931642907794, z: -3.758540628214001}, "+=4");
tl.set(controls.target, {x: -5.578008013648111, y: 2.368119817301643, z: -1.2728477092083696});
tl.set(camera.position, {x: -0.14748454630558427, y: 4.095649844010737, z: 2.276316216092673}, "+=4");
tl.set(controls.target, {x: -1.3213041324510924, y: 3.5639397959277423, z: 4.398968231121253});
tl.to(camera.position, 5, {x: -4.66409518053951, y: 3.433172380659705, z: 2.129296810886241});
tl.to(controls.target, 5, {x: -2.492676285428525, y: 2.977949053234203, z: 5.3852714055908395}, "-=5");
tl.set(camera.position, {x: -2.4804182926745026, y: 3.2895493905255724, z: 5.842592482797583}, "+=1");
tl.set(controls.target, {x: -2.4836614450931473, y: 3.197673368479842, z: 5.344669480328349});
tl.set(camera.position, {x: -2.4566319096536575, y: 3.589697518540242, z: 2.1596578752887345}, "+=8");
tl.set(controls.target, {x: -2.4836614450931473, y: 3.197673368479842, z: 5.344669480328349});
tl.set(camera.position, {x: 1.3787999465411769, y: 3.584630597531918, z: 3.4478987795683342}, "+=5");
tl.set(controls.target, {x: -2.3354890963104626, y: 3.152165599981446, z: 3.283177649460443});


    // game logic
    var update = function( )
    {
    };
    
    // draw Scene
    var render = function( )
    {
     renderer.render( scene, camera );
    };

    // run game loop (update, render, repeat)
    var GameLoop = function( )
    {
      requestAnimationFrame( GameLoop );
      controls.update();
      update( );
      render( );
      console.log(camera.position);
      console.log(controls.target);
    };
 

    GameLoop( );
      window.scene = scene;



//dialogues

setTimeout(function(){
      document.getElementById("dialog1").play();
      console.log('your audio is started just now');    
      document.getElementById("napisdialog1").style.display = "block";
    }, 8000)
     
var audio = document.querySelector('#dialog1');

audio.onended = (event) => {
  setTimeout(function() {
  document.getElementById("napisdialog1").style.display = "none";
  document.getElementById("napisdialog2").style.display = "block";
  document.getElementById("dialog2").play();
      console.log('your audio2 is started just now');
}, 3750)
};

var audio = document.querySelector('#dialog2');
audio.onended = (event) => {
  setTimeout(function() {
  document.getElementById("napisdialog2").style.display = "none";
  document.getElementById("napisdialog3").style.display = "block";
  document.getElementById("dialog3").play();
      console.log('your audio2 is started just now');
}, 18000)
};

var audio = document.querySelector('#dialog3');
audio.onended = (event) => {
  document.getElementById("napisdialog3").style.display = "none";
  document.getElementById("napisdialog4").style.display = "block";
  document.getElementById("dialog4").play();
      console.log('your audio2 is started just now');
};

}

  function mySlideshow() {
    document.getElementById("pergamin").style.display = "none";
    document.getElementById("pergamin2").style.display = "block";
    document.getElementById("przycisk3").style.display = "none";

 document.getElementById("dialog6").play();
var audio = document.querySelector('#dialog6');
audio.onended = (event) => {
 document.getElementById("przycisk4").style.display = "block";
};

}

  function mySlideshow2() {
    document.getElementById("pergamin2").style.display = "none";
    document.getElementById("pergamin3").style.display = "block";
    document.getElementById("przycisk4").style.display = "none";  

 document.getElementById("dialog8").play();
var audio = document.querySelector('#dialog8');
audio.onended = (event) => {
 document.getElementById("przycisk5").style.display = "block";
};
}

  function mySlideshow3() {
    document.getElementById("pergamin3").style.display = "none";
    document.getElementById("pergamin4").style.display = "block";
    document.getElementById("przycisk5").style.display = "none";  

 document.getElementById("dialog9").play();
var audio = document.querySelector('#dialog9');
audio.onended = (event) => {
 document.getElementById("przycisk6").style.display = "block";
};
}

  function mySlideshow4() {
    document.getElementById("pergamin4").style.display = "none";
    document.getElementById("pergamin5").style.display = "block";
    document.getElementById("przycisk6").style.display = "none";  

 document.getElementById("dialog10").play();
var audio = document.querySelector('#dialog10');
audio.onended = (event) => {
 document.getElementById("przycisk7").style.display = "block";
};
}

  function mySlideshow5() {
    document.getElementById("pergamin5").style.display = "none";
    document.getElementById("pergamin6").style.display = "block";
    document.getElementById("przycisk7").style.display = "none";  

 document.getElementById("dialog11").play();
var audio = document.querySelector('#dialog11');
audio.onended = (event) => {
 document.getElementById("przycisk8").style.display = "block";
};
}

  function mySlideshow6() {
    document.getElementById("pergamin6").style.display = "none";
    document.getElementById("pergamin7").style.display = "block";
    document.getElementById("przycisk8").style.display = "none";  

 document.getElementById("dialog12").play();
var audio = document.querySelector('#dialog12');
audio.onended = (event) => {
 document.getElementById("przycisk9").style.display = "block";
};
}

  function mySlideshow7() {
    document.getElementById("pergamin7").style.display = "none";
    document.getElementById("pergamin8").style.display = "block";
    document.getElementById("przycisk9").style.display = "none";  

 document.getElementById("dialog14").play();
var audio = document.querySelector('#dialog14');
audio.onended = (event) => {
 document.getElementById("przycisk10").style.display = "block";
};
}

  function mySlideshow8() {
    document.getElementById("pergamin8").style.display = "none";
    document.getElementById("pergamin9").style.display = "block";
    document.getElementById("przycisk10").style.display = "none";  

 document.getElementById("dialog15").play();
var audio = document.querySelector('#dialog15');
audio.onended = (event) => {
 document.getElementById("przycisk11").style.display = "block";
};
}

</script>

</body>
</html>